%----------------------------------------------------------------------------
\chapter{\bevezetes}
%----------------------------------------------------------------------------

Cyber-physial systems (CPS) are systems built of physical and computational elements cooperating with each other.
Cyber-physial systems are used in various contexts. 
Factories, logistics and energy systems can utilize computers to improve quality, provide monitoring features, and ensure safety for them.
As cyber-physical systems are widely used in critical environments, ensuring their safe operation is inevitable: Their fault can lead to enormous financial loss, environmental damages, or even death of people.
Design-time checking may solve some of the problems, but the physical component of the CPS makes them less feasible to formal model checking, as the state space of the physical worlds is practically infinite and is less expectable.
Another method is runtime verification: Altough we cannot prepare the system to avoid all of the problems, we can observe its state and deteck if some error occurs and execute safety protocols to avoid harm. 


In this thesis a framework is presented capable of generating monitoring code, thus helping the runtime verification of cyber-physical systems. 
The framework is created to help developing such systems using model-driven developement, where models are the primary artifacts in the developement process.
Monitoring components does not have to be programmed manually, but can generated by our framework based on the domain models and error conditions given as graph patterns, which are defined by the developers of the system.

The framework itself is mostly written in Xtend, which is an extended dialect of Java, with features improving usability, and making it specially useful for implementing code generators. 
The generated code is \cpp{}, because it can be used in various platforms from embedded systems to high powered computers, or virtual machines in clouds. 
Efficiency also considered when choosing \cpp{}, so using embedded systems can be feasible; 
The efficiency of the framework is measured and evaluated on embedded systems. 
The generator components of the framework are a collection of Eclipse plugins.
They are based on Eclipse Modeling Framework (EMF), which providing modeling tools for eclipse based applications.
\viatra is also used as it provides VQL (Viatra Query Language), a language for graph pattern definition.

In Chapter 2, the motivating example is presented, which will be useful to show how the concepts of this thesis are materialized in practice.
In Chapter 3, preliminaries are expound to clarify the used terms and concepts, and give some background knowledge needed to understand the framework.
Chapter 4 is an overview about the framework, its structure, and the approach it uses.
Chapter 5 is about the ''pre-framework'' tasks: Designing the domain model, defining graph queries, and technologies which provides tools for these steps.
In Chapter 6, the code generation components are shown, and how the framework generates the artifacts for monitoring, and how they can be used.
Chapter 7 shows how those generated artifacts work at runtime. 
In Chapter 8 we measure and evaluate the framework.

\todo{Itt nagyon erősen utalnom kell arra, hogy mennyi indent csináltam, mert a sok passzívtól nem jön át}